# 文件上传功能使用指南

## 📁 支持的文件格式

### 📄 文档文件
- **文本文件**：`.txt`, `.md`, `.markdown` 
- **办公文档**：`.pdf`, `.doc`, `.docx`, `.ppt`, `.pptx`, `.xls`, `.xlsx` 
- **代码文件**：`.js`, `.ts`, `.py`, `.java`, `.cpp`, `.c`, `.html`, `.css`, `.json`, `.xml` 

### 🖼️ 图像文件
- **常见格式**：`.jpg`, `.jpeg`, `.png`, `.gif`, `.bmp`, `.webp` 
- **矢量图形**：`.svg` 
- **原始格式**：`.ico` 

### 🔊 音频文件
- `.mp3`, `.wav`, `.flac`, `.aac`, `.ogg`, `.m4a` 

### 🎥 视频文件
- `.mp4`, `.avi`, `.mov`, `.wmv`, `.flv`, `.webm` 

### 📊 数据文件
- `.csv`, `.tsv`

## ⚠️ 重要限制

### 上传限制：
- **文件大小**：单个文件不超过 50MB
- **文件数量**：最多同时上传 5 个文件
- **隐私保护**：敏感文件请注意保护隐私

### 模型兼容性：
- 只有**视觉模型**或**多模态**标签的模型才能处理图像和视频文件
- 其他模型仅支持文本文件（文档、代码、数据文件）

## 🔍 使用方法

### Web端上传：
1. 点击输入框左侧的 **附件图标**（📎）
2. 文件上传面板会展开
3. 可以：
   - 点击上传区域选择文件
   - 直接拖拽文件到上传区域
4. 文件上传后会显示文件列表
5. 可以预览图片或删除文件
6. 输入消息内容后点击发送

### 功能特性：
- **拖拽上传**：支持直接拖拽文件到上传区域
- **文件预览**：图片文件支持即时预览
- **文件管理**：可以删除已选择的文件
- **格式验证**：自动验证文件格式和大小
- **批量上传**：支持同时上传多个文件

## 💡 使用技巧

### 对于文本文件：
- 模型会读取文件内容并基于内容回答问题
- 支持代码文件的语法分析和解释
- PDF、Word等文档会提取文本内容

### 对于图像文件：
- 视觉模型可以描述图像内容
- 支持OCR文字识别（使用`deepseek-ocr`等专用模型）
- 可以进行图像分析和理解

### 最佳实践：
1. **清晰命名**：给文件起有意义的名称
2. **格式优化**：图片使用WebP或JPEG格式减小体积
3. **分批处理**：大文件建议分批次处理
4. **模型选择**：根据文件类型选择合适的模型

## 🛠️ 技术实现

### API调用：
- 文件上传使用 `multipart/form-data` 格式
- 支持流式响应处理
- 自动处理文件编码和传输

### 安全特性：
- 客户端文件类型验证
- 文件大小限制检查
- 支持的文件格式白名单

### 用户体验：
- 实时上传进度显示
- 文件预览和管理
- 错误提示和处理
- 响应式设计支持

## 🔧 故障排除

### 常见问题：
1. **文件上传失败**
   - 检查文件格式是否支持
   - 确认文件大小不超过50MB
   - 验证网络连接正常

2. **模型无法处理文件**
   - 确认使用的是支持文件处理的模型
   - 检查文件格式与模型兼容性
   - 尝试使用专门的视觉模型

3. **预览功能异常**
   - 仅图片文件支持预览
   - 检查浏览器是否支持图片格式
   - 确认文件没有损坏

### 错误代码：
- `FILE_FORMAT_NOT_SUPPORTED`：文件格式不支持
- `FILE_SIZE_EXCEEDED`：文件大小超过限制
- `UPLOAD_FAILED`：上传失败，请重试
- `MODEL_NOT_COMPATIBLE`：当前模型不支持文件处理

---

## 📞 技术支持

如果遇到问题，请：
1. 检查浏览器控制台错误信息
2. 确认API配置正确
3. 验证文件格式和大小
4. 联系技术支持团队
